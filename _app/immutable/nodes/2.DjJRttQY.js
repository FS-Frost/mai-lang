var Ye=Object.defineProperty;var Ge=(i,e,t)=>e in i?Ye(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var T=(i,e,t)=>(Ge(i,typeof e!="symbol"?e+"":e,t),t);import{s as Ee,n as ve,r as Xe,o as Ke}from"../chunks/scheduler.Bmg8oFKD.js";import{S as xe,i as $e,s as y,e as E,t as ye,y as qe,d as p,f as C,c as x,z as G,a as _,b as Ce,o as m,g as F,h as f,A as Ie,B as Pe,j as Je,k as Oe,n as J,q as Qe,l as ae,m as Ze,u as Fe,v as ze,w as je,x as Ue}from"../chunks/index.B0U4Du-Q.js";import{w as We}from"../chunks/index.D_GRTHN4.js";const et=!0,Et=Object.freeze(Object.defineProperty({__proto__:null,prerender:et},Symbol.toStringTag,{value:"Module"})),tt=["home"],st=tt.map(i=>i.toString()),Se=We();function rt(i){return st.includes(i)}const nt="int",Be="string",Q="fn",de=";",ge=",",Y="(",j=")",X="{",Z="}",He="=",Re='"',De="/",Ve="TOKEN_COMMENT",K="TOKEN_TYPE",N="TOKEN_NAME",ne="TOKEN_INT",q="TOKEN_STRING",L="TOKEN_LITERAL";class at{constructor(e,t,s){T(this,"filePath");T(this,"row");T(this,"column");this.filePath=e,this.row=t,this.column=s}display(){return`[${this.filePath}:${this.row}:${this.column+1}]`}}class z{constructor(e,t,s){T(this,"location");T(this,"name");T(this,"type");T(this,"value");this.location=e,this.name=t,this.type="",this.value=s}display(){return`[${this.name.padEnd(L.length," ")}]${this.location.display()} ${this.value}`}}class pe{constructor(e,t){T(this,"filePath");T(this,"source");T(this,"cursor");T(this,"column");T(this,"row");T(this,"lines");this.filePath=e,this.source=t,this.lines=t.split(`
`),this.cursor=0,this.column=0,this.row=1}isType(e){return[nt,Be].includes(e)}isAlpha(e){return/^[a-zA-Z]$/.test(e)}isAlphaNumeric(e){return/^[a-zA-Z0-9]$/.test(e)}isDigit(e){return/^[0-9]$/.test(e)}isSpace(e){return e===" "||e===`
`||e==="	"||e==="\r"}advanceCursor(){if(this.isNotEmpty()){const e=this.source[this.cursor];this.cursor++,this.column++,e===`
`&&(this.column=0,this.row++)}}isEmpty(){return this.cursor>=this.source.length}isNotEmpty(){return!this.isEmpty()}isEndOfLine(){return this.source[this.cursor]===`
`}skipSpaces(){for(;this.isNotEmpty()&&this.isSpace(this.source[this.cursor]);)this.advanceCursor()}location(){return new at(this.filePath,this.row,this.column)}display(){let t=this.lines[this.row-1]+`
`;for(let s=0;s<this.column;s++)t+="_";return t+="^",t}logLine(){console.log(this.display())}logLineError(){console.error(this.display())}tokenizeFunction(){let[e,t]=this.nextToken();if(t)return[null,t];if(e==null)return[null,`expecting ${N}, but got null`];if(e.name!==N)return[null,`expecting ${N}, but got ${e.name}`];if(e.value,[e,t]=this.nextToken(),t)return[null,t];if(e==null)return[null,`expecting ${Y}, but got null`];if(e.value!==Y)return[null,`expecting ${Y}, but got ${e.value}`];if([e,t]=this.nextToken(),t)return[null,t];if(e==null)return[null,`expecting ${j}, but got null`];if(e.value!==j)return[null,`expecting ${j}, but got ${e.value}`];if([e,t]=this.nextToken(),t)return[null,t];if(e==null)return[null,`expecting ${X}, but got null`];if(e.value!==X)return[null,`expecting ${X}, but got ${e.value}`];let s=!1;for(;this.isNotEmpty();){if([e,t]=this.nextToken(),t)return[null,t];if(e==null)return[null,"expecting token, but got null"];if(e.name===L&&e.value===Z){s=!0;break}}return s?[null,""]:[null,`expecting ${Z}, but got null`]}nextToken(){for(this.skipSpaces();this.isEmpty();)return[null];const e=this.location(),t=this.source[this.cursor];if(t==De){if(this.isEmpty())throw new Error("bad comment");if(this.advanceCursor(),this.source[this.cursor]!==De)throw new Error("bad comment 2");if(this.advanceCursor(),this.skipSpaces(),e.row!=this.row){const u=Ve;return[new z(e,u,"")]}let a="";for(;this.isNotEmpty()&&this.source[this.cursor]!==`
`;)a+=this.source[this.cursor],this.advanceCursor();const o=Ve;return[new z(e,o,a)]}if(this.isAlpha(t)){const n=this.cursor;for(;this.isNotEmpty()&&this.isAlphaNumeric(this.source[this.cursor]);)this.advanceCursor();const a=this.source.substring(n,this.cursor);if(a===Q)return[new z(e,Q,a)];const o=this.isType(a)?K:N;return[new z(e,o,a)]}if(this.isDigit(t)){const n=this.cursor;for(;this.isNotEmpty()&&this.isDigit(this.source[this.cursor]);)this.advanceCursor();const a=this.source.substring(n,this.cursor);return[new z(e,ne,a)]}if(t===Re){const n=this.cursor+1;for(;this.isNotEmpty();)if(this.advanceCursor(),this.source[this.cursor]===Re){this.advanceCursor();break}const a=this.source.substring(n,this.cursor-1);return[new z(e,q,a)]}return[He,X,Z,Y,j,de,ge].includes(t)?(this.isNotEmpty()&&this.advanceCursor(),[new z(e,L,t)]):[null,`${e.display()}: invalid token at ${t}`]}tokenize(){const e=[];for(;;){const[t,s]=this.nextToken();if(s)throw new Error(s);if(!t)break;e.push(t)}return[e]}}class me{constructor(e){T(this,"lexer");this.lexer=e}parseTokens(e,t){let s="";switch(t){case"go":s+=`package main

`;break;case"php":s+=`<?php
`}for(;e.length>0;){const r=e[0];switch(r.name){case K:s+=this.parseVariableDeclaration(e,t);break;case N:s+=this.parseFunctionCall(e,t);break;case Q:s+=this.parseFunction(e,t,1);break;default:const n=`${r.location.display()}: expected ${K} or ${N}, but got ${r.name}: ${r.value}`;throw new Error(n)}s+=`
`}return s}assertNextTokenName(e,...t){const s=e.shift()??null;if(!s){const r=`expected ${t.join(", ")}, but got null`;throw new Error(r)}if(!t.includes((s==null?void 0:s.name)??"")){const r=`${s.location.display()}: expected ${t.join(", ")}, but got ${s.name}: ${s.value}`;throw new Error(r)}return s}assertNextTokenLiteral(e,t){const s=e.shift()??null;if(!s){const r=`expected ${t}, but got null`;throw new Error(r)}if(s.value!==t){const r=`${s.location.display()}: expected ${t}, but got ${s.value}`;throw new Error(r)}return s}assertString(e,t){if(t!==e){const s=`expected string ${t}, but got ${e}`;throw new Error(s)}}assertFuncArg(e){const t=this.assertNextTokenName(e,K),s=this.assertNextTokenName(e,N);return{type:t.value,name:s.value}}parseVariableDeclaration(e,t){const s=this.assertNextTokenName(e,K),r=this.assertNextTokenName(e,N),n=this.assertNextTokenName(e,L);this.assertString(n.value,He);let a="";switch(s.value){case Be:{const u=this.assertNextTokenName(e,q);switch(t){case"go":a=`var ${r.value} ${s.value} = "${u.value}"`;break;case"php":a=`$${r.value} = (${s.value}) "${u.value}";`;break;default:a=`const ${r.value} = "${u.value}";`;break}break}default:{const u=this.assertNextTokenName(e,ne);switch(t){case"go":a=`var ${r.value} ${s.value} = ${u.value}`;break;case"php":a=`$${r.value} = (${s.value}) ${u.value};`;break;default:a=`const ${r.value} = ${u.value};`;break}break}}const o=this.assertNextTokenName(e,L);return this.assertString(o.value,de),a}formatVar(e,t){switch(t){case"php":return"$"+e;default:return e}}parseFunctionCall(e,t){const s=this.assertNextTokenName(e,N),r=this.assertNextTokenName(e,L);this.assertString(r.value,Y);let n="";for(;;){let o=this.assertNextTokenName(e,N,ne,q,L);if(o.name===q?o.value=`"${o.value}"`:o.name===N&&(o.value=this.formatVar(o.value,t)),o.name===L&&o.value===ge)continue;if([ne,q,N].includes(o.name)){n.length>0&&(n+=", "),n+=o.value;continue}if(o.name===L&&o.value===j)break}const a=this.assertNextTokenName(e,L);switch(this.assertString(a.value,de),s.value){case"print":switch(t){case"go":return`println(${n})`;case"php":return`printf(${n});`;default:return`console.log(${n});`}default:switch(t){case"go":return`${s.value}(${n})`;case"php":return`${s.value}(${n});`;default:return`${s.value}(${n});`}}}generateIndent(e){let t="";const s=e*4;for(let r=1;r<=s;r++)t+=" ";return t}parseFunction(e,t,s){const r=this.generateIndent(s-1),n=this.generateIndent(s);let a=this.assertNextTokenName(e,Q);a=this.assertNextTokenName(e,N);const o=a.value;this.assertNextTokenLiteral(e,Y);const u=[];for(;;){if(a=e[0],a.name===K){const l=this.assertFuncArg(e);u.push(l)}if(e.length===0)break;if(a=e[0],a.name===L&&a.value===ge){e.shift();continue}if(a.name===L&&a.value===j||a.type!==K)break}this.assertNextTokenLiteral(e,j),this.assertNextTokenLiteral(e,X);let h="";switch(t){case"go":{if(o==="main"){h+=`func ${r}${o}() {
`;break}let l="";for(let c=0;c<u.length;c++){c>0&&(l+=", ");const k=u[c];l+=`${k.name} ${k.type}`}h+=`${r}${o} := func(${l}) {
`;break}case"php":{let l="";for(let c=0;c<u.length;c++){c>0&&(l+=", ");const k=u[c];l+=`${k.type} $${k.name}`}h+=`${r}function ${o}(${l}) {
`;break}case"js":{let l="";for(let c=0;c<u.length;c++){c>0&&(l+=", ");const k=u[c];l+=k.name}h+=`${r}function ${o}(${l}) {
`;break}}for(;e.length>0;){const l=e[0];if(l.value===Z)break;switch(l.name){case K:h+=n+this.parseVariableDeclaration(e,t)+`
`;break;case N:h+=n+this.parseFunctionCall(e,t)+`
`;break;case Q:h+=this.parseFunction(e,t,s+1)+`
`;break}}return this.assertNextTokenLiteral(e,Z),h+=`${r}}`,h}}const ot=`
fn main() {
    int num1 = 2;
    print(num1);

    string text = "Hi!";
    print(text);

    fn customPrint(string arg, int n) {
        print(n, arg);
    }

    customPrint("called from func", num1);
}
`;function it(i){let e,t,s="MAI Lang",r,n,a,o,u,h,l,c,k="MAI source code",W,$,v,A,g,w,Te="Go",oe,U,I,ie,P,O,_e="JS",le,B,S,ce,R,D,we="PHP",ue,H,V,he,Ne;return{c(){e=y(),t=E("h1"),t.textContent=s,r=y(),n=E("p"),a=ye(i[4]),o=ye(" "),u=y(),h=E("div"),l=E("div"),c=E("label"),c.textContent=k,W=y(),$=E("div"),v=E("textarea"),A=y(),g=E("div"),w=E("label"),w.textContent=Te,oe=y(),U=E("div"),I=E("textarea"),ie=y(),P=E("div"),O=E("label"),O.textContent=_e,le=y(),B=E("div"),S=E("textarea"),ce=y(),R=E("div"),D=E("label"),D.textContent=we,ue=y(),H=E("div"),V=E("textarea"),this.h()},l(d){qe("svelte-1eds6rg",document.head).forEach(p),e=C(d),t=x(d,"H1",{"data-svelte-h":!0}),G(t)!=="svelte-1vjs4wv"&&(t.textContent=s),r=C(d),n=x(d,"P",{class:!0});var fe=_(n);a=Ce(fe,i[4]),o=Ce(fe," "),fe.forEach(p),u=C(d),h=x(d,"DIV",{class:!0});var M=_(h);l=x(M,"DIV",{class:!0});var ee=_(l);c=x(ee,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),G(c)!=="svelte-pcyajw"&&(c.textContent=k),W=C(ee),$=x(ee,"DIV",{class:!0});var be=_($);v=x(be,"TEXTAREA",{class:!0}),_(v).forEach(p),be.forEach(p),ee.forEach(p),A=C(M),g=x(M,"DIV",{class:!0});var te=_(g);w=x(te,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),G(w)!=="svelte-e4uy0f"&&(w.textContent=Te),oe=C(te),U=x(te,"DIV",{class:!0});var ke=_(U);I=x(ke,"TEXTAREA",{class:!0}),_(I).forEach(p),ke.forEach(p),te.forEach(p),ie=C(M),P=x(M,"DIV",{class:!0});var se=_(P);O=x(se,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),G(O)!=="svelte-4v4mau"&&(O.textContent=_e),le=C(se),B=x(se,"DIV",{class:!0});var Le=_(B);S=x(Le,"TEXTAREA",{class:!0}),_(S).forEach(p),Le.forEach(p),se.forEach(p),ce=C(M),R=x(M,"DIV",{class:!0});var re=_(R);D=x(re,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),G(D)!=="svelte-1tfbv71"&&(D.textContent=we),ue=C(re),H=x(re,"DIV",{class:!0});var Ae=_(H);V=x(Ae,"TEXTAREA",{class:!0}),_(V).forEach(p),Ae.forEach(p),re.forEach(p),M.forEach(p),this.h()},h(){document.title="MAI Lang",m(n,"class","has-text-danger svelte-xcim33"),m(c,"class","label"),m(c,"for",""),m(v,"class","textarea svelte-xcim33"),m($,"class","control"),m(l,"class","field svelte-xcim33"),m(w,"class","label"),m(w,"for",""),m(I,"class","textarea svelte-xcim33"),I.value=i[1],I.readOnly=!0,m(U,"class","control"),m(g,"class","field svelte-xcim33"),m(O,"class","label"),m(O,"for",""),m(S,"class","textarea svelte-xcim33"),S.value=i[2],S.readOnly=!0,m(B,"class","control"),m(P,"class","field svelte-xcim33"),m(D,"class","label"),m(D,"for",""),m(V,"class","textarea svelte-xcim33"),V.value=i[3],V.readOnly=!0,m(H,"class","control"),m(R,"class","field svelte-xcim33"),m(h,"class","langs svelte-xcim33")},m(d,b){F(d,e,b),F(d,t,b),F(d,r,b),F(d,n,b),f(n,a),f(n,o),F(d,u,b),F(d,h,b),f(h,l),f(l,c),f(l,W),f(l,$),f($,v),Ie(v,i[0]),f(h,A),f(h,g),f(g,w),f(g,oe),f(g,U),f(U,I),f(h,ie),f(h,P),f(P,O),f(P,le),f(P,B),f(B,S),f(h,ce),f(h,R),f(R,D),f(R,ue),f(R,H),f(H,V),he||(Ne=[Pe(v,"input",i[6]),Pe(v,"keyup",i[7])],he=!0)},p(d,[b]){b&16&&Je(a,d[4]),b&1&&Ie(v,d[0]),b&2&&(I.value=d[1]),b&4&&(S.value=d[2]),b&8&&(V.value=d[3])},i:ve,o:ve,d(d){d&&(p(e),p(t),p(r),p(n),p(u),p(h)),he=!1,Xe(Ne)}}}function lt(i,e,t){let s=ot,r="",n="",a="",o="";function u(){t(1,r="");const $="source.mai",v=new pe($,s),[A,g]=v.tokenize();if(g)throw console.error(g),v.logLineError(),new Error(g);console.log({tokens:A});const w=new me(v);t(1,r=w.parseTokens([...A],"go"))}function h(){t(2,n="");const $="source.mai",v=new pe($,s),[A,g]=v.tokenize();if(g)throw console.error(g),v.logLineError(),new Error(g);const w=new me(v);t(2,n=w.parseTokens([...A],"js"))}function l(){t(3,a="");const $="source.mai",v=new pe($,s),[A,g]=v.tokenize();if(g)throw console.error(g),v.logLineError(),new Error(g);const w=new me(v);t(3,a=w.parseTokens([...A],"php"))}function c(){try{t(4,o=""),u(),h(),l()}catch($){console.error($),t(4,o=`${$}`)}}Ke(()=>{t(0,s=s.replace(`
`,"")),c()});function k(){s=this.value,t(0,s)}return[s,r,n,a,o,c,k,()=>c()]}class ct extends xe{constructor(e){super(),$e(this,e,lt,it,Ee,{})}}function Me(i){let e,t;return e=new ct({}),{c(){Fe(e.$$.fragment)},l(s){ze(e.$$.fragment,s)},m(s,r){je(e,s,r),t=!0},i(s){t||(J(e.$$.fragment,s),t=!0)},o(s){ae(e.$$.fragment,s),t=!1},d(s){Ue(e,s)}}}function ut(i){let e,t,s=i[0]=="home"&&Me();return{c(){s&&s.c(),e=Oe()},l(r){s&&s.l(r),e=Oe()},m(r,n){s&&s.m(r,n),F(r,e,n),t=!0},p(r,[n]){r[0]=="home"?s?n&1&&J(s,1):(s=Me(),s.c(),J(s,1),s.m(e.parentNode,e)):s&&(Qe(),ae(s,1,1,()=>{s=null}),Ze())},i(r){t||(J(s),t=!0)},o(r){ae(s),t=!1},d(r){r&&p(e),s&&s.d(r)}}}function ht(i,e,t){let s;return Ke(()=>{Se.subscribe(o=>{o!=null&&t(0,s=o)});const n=new URLSearchParams(location.search).get("page")??"",a=rt(n)?n:"home";Se.set(a)}),[s]}class ft extends xe{constructor(e){super(),$e(this,e,ht,ut,Ee,{})}}function pt(i){let e,t,s;return t=new ft({}),{c(){e=E("section"),Fe(t.$$.fragment),this.h()},l(r){e=x(r,"SECTION",{class:!0});var n=_(e);ze(t.$$.fragment,n),n.forEach(p),this.h()},h(){m(e,"class","svelte-u22agc")},m(r,n){F(r,e,n),je(t,e,null),s=!0},p:ve,i(r){s||(J(t.$$.fragment,r),s=!0)},o(r){ae(t.$$.fragment,r),s=!1},d(r){r&&p(e),Ue(t)}}}class xt extends xe{constructor(e){super(),$e(this,e,null,pt,Ee,{})}}export{xt as component,Et as universal};
